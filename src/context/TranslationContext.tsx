import React, { createContext, useState, useContext, ReactNode } from 'react';
import { TranslationService } from '../services/translationService';

// Available languages
type LanguageCode = 'en' | 'es' | 'fr' | 'zh' | 'ar' | 'hi';

// Context types
interface TranslationContextType {
  translate: (key: string) => string;
  setLanguage: (code: string) => void;
  currentLanguage: string;
  translateWebsite: (targetLang: string) => Promise<void>;
}

// Create the context
const TranslationContext = createContext<TranslationContextType | undefined>(undefined);

// Sample translations (simplified for demo)
const translations: Record<LanguageCode, Record<string, string>> = {
  en: {
    'Home': 'Home',
    'Community': 'Community',
    'Resources': 'Resources',
    'Mental Health': 'Mental Health',
    'Kids Corner': 'Kids Corner',
    'Sign In': 'Sign In',
    'Sign Up': 'Sign Up',
    'Sign Out': 'Sign Out',
    'My Profile': 'My Profile',
    'Email': 'Email',
    'Password': 'Password',
    'Confirm Password': 'Confirm Password',
    'Forgot Password?': 'Forgot Password?',
    'Don\'t have an account?': 'Don\'t have an account?',
    'Already have an account?': 'Already have an account?',
    'Language': 'Language',
    'Join our community of single parents': 'Join our community of single parents',
    'Find support, resources and connections': 'Find support, resources and connections',
    'Resources for Single Parents': 'Resources for Single Parents',
    'Employment Support': 'Employment Support',
    'Housing Assistance': 'Housing Assistance',
    'Legal Resources': 'Legal Resources',
    'Schedule a Consultation': 'Schedule a Consultation',
    'About Us': 'About Us',
    'Contact Us': 'Contact Us',
    'Quick Links': 'Quick Links',
    'Newsletter': 'Newsletter',
    'Subscribe': 'Subscribe',
    'Your Email': 'Your Email',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': 'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.',
    'Made with love for single parents': 'Made with love for single parents',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': 'Subscribe to our newsletter for the latest updates, resources, and community events.',
    'Single Parent Support Hub. All rights reserved.': 'Single Parent Support Hub. All rights reserved.',
    'Childcare Resources': 'Childcare Resources',
    'Schedule Your Consultation': 'Schedule Your Consultation',
    'Kids Activities': 'Kids Activities',
    'Storybooks': 'Storybooks',
    'Educational Content': 'Educational Content',
    'Create an account to join our community': 'Create an account to join our community',
    'Welcome back': 'Welcome back',
    'Password Requirements': 'Password Requirements',
    'Password must contain:': 'Password must contain:',
    'At least 8 characters': 'At least 8 characters',
    'One uppercase letter': 'One uppercase letter',
    'One lowercase letter': 'One lowercase letter',
    'One number': 'One number',
    'One special character': 'One special character',
    'Reset Password': 'Reset Password',
    'Enter your email to reset your password': 'Enter your email to reset your password',
    'Send Reset Link': 'Send Reset Link',
    'Back to Sign In': 'Back to Sign In',
  },
  es: {
    'Home': 'Inicio',
    'Community': 'Comunidad',
    'Resources': 'Recursos',
    'Mental Health': 'Salud Mental',
    'Kids Corner': 'Rincón Infantil',
    'Sign In': 'Iniciar Sesión',
    'Sign Up': 'Registrarse',
    'Sign Out': 'Cerrar Sesión',
    'My Profile': 'Mi Perfil',
    'Email': 'Correo Electrónico',
    'Password': 'Contraseña',
    'Confirm Password': 'Confirmar Contraseña',
    'Forgot Password?': '¿Olvidó su Contraseña?',
    'Don\'t have an account?': '¿No tiene una cuenta?',
    'Already have an account?': '¿Ya tiene una cuenta?',
    'Language': 'Idioma',
    'Join our community of single parents': 'Únase a nuestra comunidad de padres solteros',
    'Find support, resources and connections': 'Encuentre apoyo, recursos y conexiones',
    'Resources for Single Parents': 'Recursos para Padres Solteros',
    'Employment Support': 'Apoyo Laboral',
    'Housing Assistance': 'Asistencia de Vivienda',
    'Legal Resources': 'Recursos Legales',
    'Schedule a Consultation': 'Programar una Consulta',
    'About Us': 'Sobre Nosotros',
    'Contact Us': 'Contáctenos',
    'Quick Links': 'Enlaces Rápidos',
    'Newsletter': 'Boletín',
    'Subscribe': 'Suscribirse',
    'Your Email': 'Su Correo Electrónico',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': 'Single Parent Support Hub se dedica a proporcionar recursos, comunidad y apoyo para padres solteros que navegan por los desafíos de la paternidad.',
    'Made with love for single parents': 'Hecho con amor para padres solteros',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': 'Suscríbase a nuestro boletín para recibir las últimas actualizaciones, recursos y eventos comunitarios.',
    'Single Parent Support Hub. All rights reserved.': 'Single Parent Support Hub. Todos los derechos reservados.',
    'Childcare Resources': 'Recursos para el Cuidado Infantil',
    'Schedule Your Consultation': 'Programe Su Consulta',
    'Kids Activities': 'Actividades para Niños',
    'Storybooks': 'Libros de Cuentos',
    'Educational Content': 'Contenido Educativo',
    'Create an account to join our community': 'Cree una cuenta para unirse a nuestra comunidad',
    'Welcome back': 'Bienvenido de nuevo',
    'Password Requirements': 'Requisitos de Contraseña',
    'Password must contain:': 'La contraseña debe contener:',
    'At least 8 characters': 'Al menos 8 caracteres',
    'One uppercase letter': 'Una letra mayúscula',
    'One lowercase letter': 'Una letra minúscula',
    'One number': 'Un número',
    'One special character': 'Un carácter especial',
    'Reset Password': 'Restablecer Contraseña',
    'Enter your email to reset your password': 'Ingrese su correo electrónico para restablecer su contraseña',
    'Send Reset Link': 'Enviar Enlace de Restablecimiento',
    'Back to Sign In': 'Volver a Iniciar Sesión',
  },
  fr: {
    'Home': 'Accueil',
    'Community': 'Communauté',
    'Resources': 'Ressources',
    'Mental Health': 'Santé Mentale',
    'Kids Corner': 'Coin des Enfants',
    'Sign In': 'Se Connecter',
    'Sign Up': 'S\'inscrire',
    'Sign Out': 'Se Déconnecter',
    'My Profile': 'Mon Profil',
    'Email': 'Email',
    'Password': 'Mot de Passe',
    'Confirm Password': 'Confirmer le Mot de Passe',
    'Forgot Password?': 'Mot de Passe Oublié?',
    'Don\'t have an account?': 'Vous n\'avez pas de compte?',
    'Already have an account?': 'Vous avez déjà un compte?',
    'Language': 'Langue',
    'Join our community of single parents': 'Rejoignez notre communauté de parents célibataires',
    'Find support, resources and connections': 'Trouvez du soutien, des ressources et des connexions',
    'Resources for Single Parents': 'Ressources pour Parents Célibataires',
    'Employment Support': 'Soutien à l\'Emploi',
    'Housing Assistance': 'Aide au Logement',
    'Legal Resources': 'Ressources Juridiques',
    'Schedule a Consultation': 'Planifier une Consultation',
    'About Us': 'À Propos de Nous',
    'Contact Us': 'Contactez-Nous',
    'Quick Links': 'Liens Rapides',
    'Newsletter': 'Bulletin d\'Information',
    'Subscribe': 'S\'abonner',
    'Your Email': 'Votre Email',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': 'Single Parent Support Hub est dédié à fournir des ressources, une communauté et un soutien aux parents célibataires qui naviguent dans les défis de la parentalité.',
    'Made with love for single parents': 'Fait avec amour pour les parents célibataires',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': 'Abonnez-vous à notre bulletin pour les dernières mises à jour, ressources et événements communautaires.',
    'Single Parent Support Hub. All rights reserved.': 'Single Parent Support Hub. Tous droits réservés.',
    'Childcare Resources': 'Ressources pour la Garde d\'Enfants',
    'Schedule Your Consultation': 'Planifiez Votre Consultation',
    'Kids Activities': 'Activités pour Enfants',
    'Storybooks': 'Livres d\'Histoires',
    'Educational Content': 'Contenu Éducatif',
    'Create an account to join our community': 'Créez un compte pour rejoindre notre communauté',
    'Welcome back': 'Bienvenue à nouveau',
    'Password Requirements': 'Exigences de Mot de Passe',
    'Password must contain:': 'Le mot de passe doit contenir:',
    'At least 8 characters': 'Au moins 8 caractères',
    'One uppercase letter': 'Une lettre majuscule',
    'One lowercase letter': 'Une lettre minuscule',
    'One number': 'Un chiffre',
    'One special character': 'Un caractère spécial',
    'Reset Password': 'Réinitialiser le Mot de Passe',
    'Enter your email to reset your password': 'Entrez votre email pour réinitialiser votre mot de passe',
    'Send Reset Link': 'Envoyer le Lien de Réinitialisation',
    'Back to Sign In': 'Retour à la Connexion',
  },
  zh: {
    'Home': '首页',
    'Community': '社区',
    'Resources': '资源',
    'Mental Health': '心理健康',
    'Kids Corner': '儿童天地',
    'Sign In': '登录',
    'Sign Up': '注册',
    'Sign Out': '退出',
    'My Profile': '我的资料',
    'Email': '电子邮件',
    'Password': '密码',
    'Confirm Password': '确认密码',
    'Forgot Password?': '忘记密码？',
    'Don\'t have an account?': '没有账户？',
    'Already have an account?': '已有账户？',
    'Language': '语言',
    'Join our community of single parents': '加入我们的单亲家长社区',
    'Find support, resources and connections': '寻找支持、资源和联系',
    'Resources for Single Parents': '单亲家长资源',
    'Employment Support': '就业支持',
    'Housing Assistance': '住房援助',
    'Legal Resources': '法律资源',
    'Schedule a Consultation': '预约咨询',
    'About Us': '关于我们',
    'Contact Us': '联系我们',
    'Quick Links': '快速链接',
    'Newsletter': '新闻通讯',
    'Subscribe': '订阅',
    'Your Email': '您的电子邮件',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': '单亲家长支持中心致力于为应对育儿挑战的单亲家长提供资源、社区和支持。',
    'Made with love for single parents': '为单亲家长精心打造',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': '订阅我们的新闻通讯，获取最新更新、资源和社区活动。',
    'Single Parent Support Hub. All rights reserved.': '单亲家长支持中心。保留所有权利。',
    'Childcare Resources': '托儿资源',
    'Schedule Your Consultation': '预约咨询',
    'Kids Activities': '儿童活动',
    'Storybooks': '故事书',
    'Educational Content': '教育内容',
    'Create an account to join our community': '创建账户加入我们的社区',
    'Welcome back': '欢迎回来',
    'Password Requirements': '密码要求',
    'Password must contain:': '密码必须包含:',
    'At least 8 characters': '至少8个字符',
    'One uppercase letter': '一个大写字母',
    'One lowercase letter': '一个小写字母',
    'One number': '一个数字',
    'One special character': '一个特殊字符',
    'Reset Password': '重置密码',
    'Enter your email to reset your password': '输入您的电子邮件以重置密码',
    'Send Reset Link': '发送重置链接',
    'Back to Sign In': '返回登录',
  },
  ar: {
    'Home': 'الرئيسية',
    'Community': 'المجتمع',
    'Resources': 'الموارد',
    'Mental Health': 'الصحة النفسية',
    'Kids Corner': 'ركن الأطفال',
    'Sign In': 'تسجيل الدخول',
    'Sign Up': 'إنشاء حساب',
    'Sign Out': 'تسجيل الخروج',
    'My Profile': 'ملفي الشخصي',
    'Email': 'البريد الإلكتروني',
    'Password': 'كلمة المرور',
    'Confirm Password': 'تأكيد كلمة المرور',
    'Forgot Password?': 'نسيت كلمة المرور؟',
    'Don\'t have an account?': 'ليس لديك حساب؟',
    'Already have an account?': 'لديك حساب بالفعل؟',
    'Language': 'اللغة',
    'Join our community of single parents': 'انضم إلى مجتمعنا من الآباء الوحيدين',
    'Find support, resources and connections': 'ابحث عن الدعم والموارد والتواصل',
    'Resources for Single Parents': 'موارد للآباء الوحيدين',
    'Employment Support': 'دعم التوظيف',
    'Housing Assistance': 'مساعدة السكن',
    'Legal Resources': 'موارد قانونية',
    'Schedule a Consultation': 'جدولة استشارة',
    'About Us': 'من نحن',
    'Contact Us': 'اتصل بنا',
    'Quick Links': 'روابط سريعة',
    'Newsletter': 'النشرة الإخبارية',
    'Subscribe': 'اشترك',
    'Your Email': 'بريدك الإلكتروني',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': 'مركز دعم الآباء الوحيدين مكرس لتوفير الموارد والمجتمع والدعم للآباء الوحيدين الذين يواجهون تحديات الأبوة والأمومة.',
    'Made with love for single parents': 'صنع بحب للآباء الوحيدين',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': 'اشترك في نشرتنا الإخبارية للحصول على آخر التحديثات والموارد وأحداث المجتمع.',
    'Single Parent Support Hub. All rights reserved.': 'مركز دعم الآباء الوحيدين. جميع الحقوق محفوظة.',
    'Childcare Resources': 'موارد رعاية الأطفال',
    'Schedule Your Consultation': 'جدولة استشارتك',
    'Kids Activities': 'أنشطة الأطفال',
    'Storybooks': 'كتب القصص',
    'Educational Content': 'محتوى تعليمي',
    'Create an account to join our community': 'أنشئ حسابًا للانضمام إلى مجتمعنا',
    'Welcome back': 'مرحبًا بعودتك',
    'Password Requirements': 'متطلبات كلمة المرور',
    'Password must contain:': 'يجب أن تحتوي كلمة المرور على:',
    'At least 8 characters': '8 أحرف على الأقل',
    'One uppercase letter': 'حرف كبير واحد',
    'One lowercase letter': 'حرف صغير واحد',
    'One number': 'رقم واحد',
    'One special character': 'حرف خاص واحد',
    'Reset Password': 'إعادة تعيين كلمة المرور',
    'Enter your email to reset your password': 'أدخل بريدك الإلكتروني لإعادة تعيين كلمة المرور',
    'Send Reset Link': 'إرسال رابط إعادة التعيين',
    'Back to Sign In': 'العودة إلى تسجيل الدخول',
  },
  hi: {
    'Home': 'होम',
    'Community': 'समुदाय',
    'Resources': 'संसाधन',
    'Mental Health': 'मानसिक स्वास्थ्य',
    'Kids Corner': 'बच्चों का कोना',
    'Sign In': 'लॉगिन',
    'Sign Up': 'रजिस्टर करें',
    'Sign Out': 'लॉग आउट',
    'My Profile': 'मेरी प्रोफाइल',
    'Email': 'ईमेल',
    'Password': 'पासवर्ड',
    'Confirm Password': 'पासवर्ड की पुष्टि करें',
    'Forgot Password?': 'पासवर्ड भूल गए?',
    'Don\'t have an account?': 'खाता नहीं है?',
    'Already have an account?': 'पहले से खाता है?',
    'Language': 'भाषा',
    'Join our community of single parents': 'हमारे सिंगल पैरेंट समुदाय में शामिल हों',
    'Find support, resources and connections': 'समर्थन, संसाधन और कनेक्शन खोजें',
    'Resources for Single Parents': 'सिंगल पैरेंट्स के लिए संसाधन',
    'Employment Support': 'रोजगार सहायता',
    'Housing Assistance': 'आवास सहायता',
    'Legal Resources': 'कानूनी संसाधन',
    'Schedule a Consultation': 'परामर्श शेड्यूल करें',
    'About Us': 'हमारे बारे में',
    'Contact Us': 'संपर्क करें',
    'Quick Links': 'त्वरित लिंक',
    'Newsletter': 'न्यूज़लेटर',
    'Subscribe': 'सब्सक्राइब करें',
    'Your Email': 'आपका ईमेल',
    'Single Parent Support Hub is dedicated to providing resources, community, and support for single parents navigating the challenges of parenthood.': 'सिंगल पैरेंट सपोर्ट हब सिंगल पैरेंट्स को पैरेंटहुड की चुनौतियों से निपटने में मदद करने के लिए संसाधन, समुदाय और समर्थन प्रदान करने के लिए समर्पित है।',
    'Made with love for single parents': 'सिंगल पैरेंट्स के लिए प्यार से बनाया गया',
    'Subscribe to our newsletter for the latest updates, resources, and community events.': 'नवीनतम अपडेट, संसाधनों और समुदाय की घटनाओं के लिए हमारे न्यूज़लेटर को सब्सक्राइब करें।',
    'Single Parent Support Hub. All rights reserved.': 'सिंगल पैरेंट सपोर्ट हब। सर्वाधिकार सुरक्षित।',
    'Childcare Resources': 'चाइल्डकेयर संसाधन',
    'Schedule Your Consultation': 'अपना परामर्श शेड्यूल करें',
    'Kids Activities': 'बच्चों की गतिविधियां',
    'Storybooks': 'कहानी की किताबें',
    'Educational Content': 'शैक्षिक सामग्री',
    'Create an account to join our community': 'हमारे समुदाय में शामिल होने के लिए खाता बनाएं',
    'Welcome back': 'वापसी पर स्वागत है',
    'Password Requirements': 'पासवर्ड आवश्यकताएं',
    'Password must contain:': 'पासवर्ड में शामिल होना चाहिए:',
    'At least 8 characters': 'कम से कम 8 वर्ण',
    'One uppercase letter': 'एक बड़ा अक्षर',
    'One lowercase letter': 'एक छोटा अक्षर',
    'One number': 'एक नंबर',
    'One special character': 'एक विशेष वर्ण',
    'Reset Password': 'पासवर्ड रीसेट करें',
    'Enter your email to reset your password': 'अपना पासवर्ड रीसेट करने के लिए अपना ईमेल दर्ज करें',
    'Send Reset Link': 'रीसेट लिंक भेजें',
    'Back to Sign In': 'साइन इन पर वापस जाएं',
  },
};

// Provider component
export const TranslationProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [currentLanguage, setCurrentLanguage] = useState<LanguageCode>('en');

  // Function to get translation for a key
  const translate = (key: string): string => {
    if (translations[currentLanguage]?.[key]) {
      return translations[currentLanguage][key];
    }
    // Fallback to English
    return translations.en[key] || key;
  };

  // Function to change language
  const setLanguage = (code: string) => {
    if (code in translations) {
      setCurrentLanguage(code as LanguageCode);
    }
  };

  // Function to translate the entire website
  const translateWebsite = async (targetLang: string) => {
    if (targetLang === currentLanguage) return;
    
    const translationService = TranslationService.getInstance();
    await translationService.translateDOM(targetLang, currentLanguage);
  };

  return (
    <TranslationContext.Provider value={{ translate, setLanguage, currentLanguage, translateWebsite }}>
      {children}
    </TranslationContext.Provider>
  );
};

// Custom hook to use the context
export const useTranslation = () => {
  const context = useContext(TranslationContext);
  if (context === undefined) {
    throw new Error('useTranslation must be used within a TranslationProvider');
  }
  return context;
};